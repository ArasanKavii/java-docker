FROM openjdk:19-jdk
COPY target/netty-example-1.0-SNAPSHOT.jar /opt/app/
 # When AutoCreateSharedArchive is true, and the CDS archive <file> can be successfully loaded, the VM will use the archive without regenerating it.
 # Otherwise:
 #    + If <file> doesn't exist, it will be created
 #    + If <file> exists, it will be regenerated if:
 #          + it is a valid dynamic archive file that was generated by JDK 18 or later, and
 #          + it is out of date (because the JDK or the application has been updated)
CMD ["java","-Xshare:auto", "-XX:+AutoCreateSharedArchive", "-XX:SharedArchiveFile=/opt/app/app-cds.jsa", "-jar", "/opt/app/netty-example-1.0-SNAPSHOT.jar"]
